### 1. 리눅스 운영을 위한 필수 개념 및 명령어
- 시스템종료 명령(터미널)
    - poweroff, shutdown -P now, halt -p, init 0 등이 존재
    - shutdown
        - -P +10 : 10분 후에 종료
        - -r 22:00 : 22시에 리부팅 -- 다른 방법은, reboot, init 6 등이 있다.
        - -c : 예약된 shutdown취소
        - -k +15 : 15분 뒤에 종료한다는 메시지를 보냄(현재 접속자 들에게), 하지만 실제 종료는 하지 않음
- 로그아웃
    - 로그아웃은 시스템 종료와 다르다. 접속을 끝낸다는 의미임.
    - 리눅스는 여러 사용자가 동시에 접속해 사용하는 다중 사용자 시스템이라서 자신만 접속을 끝내는 로그아웃이 필요하다.
    - X윈도에서는 우측 상단의 사용자 클릭 후 logout, 텍스트 모드에서는 logout, exit을 명령한다.
- 가상 콘솔
    - 가상의 모니터를 의미한다. CentOS는 총 6개의 가상 콘솔을 제공함. 즉, 컴퓨터 한 대에 모니터 여섯 개가 연결된 효과가 있다는 의미다.
    - X윈도를 실행하면 그 화면은 6개 가상 콘솔 중 1번 째라고 보면 된다. ctrl + alt + F숫자 를 누르면 (1~6)까지의 콘솔로 이동할 수 있다.
    - shutdown -k +15와 같은 명령을 root 사용자에서 수행한 후 다른 콘솔에 login을 해보면 authentication failure이 나올 것이다.
        - 곧 시스템이 종료될 예정이기 때문에 로그인이 불가하다.
    - 또는 이미 로그인한 상태인 경우, 곧 종료된다는 메세지가 나오게 된다.
- 런레벨
    - init 0과 init 6을 이미 살펴보았다.
    - init 뒤의 숫자가 런 레벨임
    - 리눅스는 시스템이 가동되는 방법을 7가지 런레벨로 나눌 수 있고, 런레벨은 0~6까지 있다.
    - 0은 종료, 1은 복구 모드, 2~4는 다중 사용자 텍스트모드인데 3만 사용, 5는 그래픽 다중 사용자 모드, 6은 재부팅
    - 런레벨 모드를 확인하고 싶은 경우 : */lib/systemd/system/runlevel?.target*파일을 확인
    - 해당 파일들은 모두 링크 파일이다. 실제 파일로 연결되어 있음(sbin아래에 시스템 바이너리 파일로 존재함)
    - `ls -l default.target`을 확인해보면 현재 Server는 그래픽 다중 사용자 모드로 지정되어 있음을 알 수 있다.
- default run level 변경하기
    - ln 명령얼를 이용해 sysbolic link를 걸어주면 된다.
    - `ln -sf /lib/systemd/system/multi-user.target /etc/systemd/system/default` 를 하면 default run level이 3인 텍스트모드로 지정된다.
    - reboot을 이용해 재부팅하면 텍스트모드로 되는 것을 확인할 수 있다.
    - 텍스트 모드로 부팅된 상태에서 x윈도를 켜기 위해서는 `startx`를 하면 된다. 그러면 폴더 이름을 변경하겠냐는 메세지가 나오는데 기존으로 유지하면 된다.
    - 다시 터미널을 이용해 ln 명령어로 default run level을 graphical.target으로 변경하면 된다.
- .swp파일
    - 숨김파일이다.
    - vi등의 editor로 수정하기 시작하면 바로 생성됨
    - 만약 제대로 저장하지 않고 터미널을 종료시 swp파일은 그대로 남게되어 정상적인 진행이 어려움
    - 그러한 경우 .swp파일을 삭제할 것.
- vi editor
    - <a href="http://www.antsys.co.kr/data/vi_editor.htm">참조</a>
- linux command
    - <a href="http://nuninaya.tistory.com/158">참조</a>
    - 혹은 --help, man을 사용
- 사용자 관리 및 파일 속성
    - 사용자 그룹
        - 리눅스는 기본적으로 다중 사용자 운영체제
        - root 사용자는 슈퍼 유저로서 모든 권한을 가짐. 사용자를 생성할 수 있다.
        - 각 사용자는 최소 하나의 그룹에 소속되어 있어야 한다.
        - /etc/passwd를 cat으로 살펴보면 모든 사용자를 알아낼 수 있다.
        - 해당 내용 중 각 행의 의미 : 사용자 이름:암호:사용자ID:소속 그룹ID:그룹이름:홈 디렉터리:기본 셸
        - /etc/group파일을 살펴보면 그룹을 알아낼 수 있다 : 그룹이름:비밀번호:그룹id:그룹에 속한 사용자이름
        - 관련 명령어
            - useradd, groupadd, passwd, usermod, userdel, chage, groups, groupmod, groupdel 등
        - x윈도 환경에서는 system-config-users명령어로 그래픽환경에서 사용자정보를 관리할 수 있다.
    - 파일 디렉터리 및 유형
        - ls -l 명령을 하면 파일의 종류, 권한, 소유자 정보를 알 수 있다.
        - d는 디렉터리, -는 파일, l은 링크, b는 블록 디바이스, c는 문자 디바이스이다.
- 링크
    - 파일의 링크는 하디 링크와 심볼릭 링크가 있다.
    - inode
        - inode는 리눅스/유닉스의 파일 시스템에서 사용하는 자료구조이다.
        - 이에는 파일, 디렉터리의 여러 정보가 존재함.
        - 모든 파일이나 디렉터리에는 1개씩의 inode가 존재하며 각 inode에는 해당 파일의 소유권, 허가권, 파일 종류 등의 정보와 해당 파일의 실제 데이터가 어디 있는지 위치도 있다.
        - 이러한 inode가 모여 있는 공간이 inode 블록이며 일반적으로 디스크 공간의 1%정도임
        - Data블록은 실제 데이터가 저장되어 있는 디스크 공간으로 전체 디스크의 대부분
        - ls -il을 하면 inode번호가 가장 앞에 나온다.
    - 하드링크
        - 생성시에 원본파일과 같은 inode를 사용하게 된다.
        - 하드링크를 생성하려면 `ln 링크대상파일이름 링크파일이름`을 실행
        - 원본파일이 없어져도 영향 없다.
    - 심볼릭링크
        - 원본에 심볼릭 링크를 만들면 새로운 inode를 만들고, 데이터는 원본 파일과 연결되는 효과를 가진다.
        - 일반적으로 사용되는 링크이며, 생성은 `ln -s 링크대상파일이름 링크파일이름`
        - 원본 파일이 없어지면 연결이 끊긴다.
- rpm
    - redhat package manager이다.
    - CentOS에서 패키지 프로그램을 설치하기 위해 사용되는 매니저인데 지금은 거의 yum이 쓰인다.
    - rpm파일의 형식 : 패키지이름-버전-릴리스번호.CentOS버전.아키텍처.rpm이다.
    - 명령어
        - `rpm -Uvh 패키지파일이름.rpm`
            - U는 기존에 패키지가 설치되지 않았다면 일반적으로 설치를 하고, 기존에 패키지가 설치되어 있다면 업그레이드
            - v는 설치과정 확인
            - h는 설치 진행 과정을 #기호로 출력
            - e는 삭제
        - `rpm -qa 패키지이름` : 시스템에 패키지가 설치되었는지 확인
        - `rpm -qf 파일의절대경로` : 이미 설치된 파일이 어느 패키지에 포함된 것인지 확인
        - `rpm -ql 패키지이름` : 특정 패키지에 어떤 파일들이 포함되었는지 확인
        - `rpm -qi 패키지일므` : 설치된 패키지의 상세 정보
    - 단점
        - 의존성 문제에 의해서 제대로 사용하지 못할 수도 있다.
        - yum명령어로 이를 해결함
- yum
    - rpm의 의존성문제를 완벽하게 해결함
    - yum은 CentOS프로젝트가 제공하는 rpm 파일 저장소에서 설치할 rpm파일은 물론이고 해당 파일과 의존서잉 있는 다른 rpm파일까지 인터넷을 통해 모두 알아서 다운로드한 후 자동으로 설치
    - /etc/yum.repos.d/의 디렉터리에 저장소의 url이 저장되어 있다.
        - yum명령어를 실행하면 자동으로 해당디렉토리의 파일을 찾아 수행
        - base : 원본 패키지 저장소의 위치
        - updates : 버그 수정, 기능 개선한 패키지
        - extra : 추가 배포된 패키지
        - centosplus : 확장 기능 제공의 추가 기능 패키지
    - 사용법
        - 설치: yum -y install 패키지이름
        - rpm파일이 있는 경우: yum -localinstall rpm파일이름.rpm
        - 업데이트가능 목록보기 : yum check-update
        - 업데이트 : yum update 패키지이름
        - 삭제 : yum remove 패키지이름
        - 정보확인 : yum info 패키지이름
        - 이외는 검색
- 파일 압축 및 묶기
    - 파일 압축에는 xz, gzip, bz2를 사용
    - 각 명령어는 교재 참조
    - 파일 묶기는 원래 압축 전에 자동으로 진행되었음 windows에서는
    - 그러나 linux/unix계열에서는 따로 존재함.
    - 명령어는 tar
- cron, at
    - cron
        - 주기적으로 반복되는 일을 자동으로 실행할 수 있도록 시스템 작업을 예약해 놓는 것.
        - cron과 관련된 데몬(서비스)는 crond이고, 관련 파일은 /etc/crontab이다.
        - /etc/crontab의 형식 : `분 시 일 월 요일 사용자 실행명령`
            - ex) `00 05 1  * * root cp -r /home /backup` : 1일 5시 00분에 root사용자는 /home아래 디렉토리를 /backup에 복사
            - *라고 표시되면 상관하지 않는 부분이라는 의미
        - cron은 주기적으로 실행할 내용을 디렉터리에 넣고 작동함.
        - /etc파일 아래에 cron.hourly, cron.daily, cron.weekly등이 존재
        - /etc/crontab파일이 시간별, 주별, 일별, 월별 호출하는 디렉터리를 보여준다.
    - at
        - 일회성 작업을 예약하는 것이다.
        - 예약시 한 번만 실행되고 소멸함
        - `at 3:00am tomorrow` : 내일 새벽 3시
        - `at 11:00pm January 30` : 1월 30일 오후 11시
        - `at -l` : 예약된 파일을 확인 가능, 작업번호가 나옴
        - `atrm 작업번호` : 취소시킴
- 네트워크
    - 필수 개념
        - TCP/IP : 컴퓨터끼리 네트워크상으로 의사소통을 하는 약속이 프로토콜임. 프로토콜 중 가장 널리 사용되는 것이 TCP/IP
            - 통신의 전송/수신을 다루는 TCP와 데이터 통신을 다루는 IP로 나뉨
        - IP주소
            - 각 컴퓨터의 랜카드는 NIC라고 함.
            - 즉, 모든 네트워크에 연결된 컴퓨터는 고유한 IP주소가 있으며, 이는 서로 다르므로 특정 컴퓨터의 IP주소를 알면, 그 컴퓨터가 어디에 있든지 접속 가능
            - 4바이트이며, 각 자리는 0~255까지 가능. Server의 IP주소는 192.168.111.100이며, 자기 자신을 의미하는 주소는 127.0.0.1이다.
        - 네트워크 주소
            - 같은 네트워크에 속해 있는 공통 주소
            - 예로 현재 CentOS 가상머신에 설치된 서버는 192.168.111.100, Server(B)는 192.168.111.200dlek.
            - 각 컴퓨터는 같은 네트워크에 있으며, 서브넷 마스크는 C클래스(255.255.255.0)이므로, 공통된 네트워크 주소는 192.168.111.0이다.
        - 브로드캐스트 주소
            - 내부 네트워크의 모든 컴퓨터가 수신하는 주소
            - 현재 주소의 제일 끝자리를 255로 바꾼 주소(C클래스의 경우)
            - 현재 브로드캐스트 주소는 192.168.111.255이다.
        - 게이트웨이
            - 내부 네트워크가 외부로 연결되는 컴퓨터 또는 장비
            - Server, Server(B), client는 내부 네트워크에 있는 컴퓨터라 서로 통신시 외부로 나갈 필요가 없지만, 인터넷을 이용하기 위해 외부에 접속하려면 반드시 게이트웨이의 IP주소를 알아야 한다.
            - 그래서 게이트웨이는 외부로 나가는 통로이므로 내부로 향하는 문과 외부로 향하는 문, 즉 각각의 네트워크 카드가 있어야 한다.
            - 현재 게이트웨이 주소는 192.168.111.2로 설정되어 있다.
            - 게이트웨이 추가 : `route add default gw 게이트웨이주소 dev 장치이름`
        - 넷마스크와 클래스
            - 넷마스크는 네트워크의 규모를 결정함
            - C클래스라면 192.168.111.0~192.168.111.255까지 게이트웨이, 브로드캐스트, 네트워크 주소를 제외하면 253대의 컴퓨터를 네트워크로 연결 가능
            - B클래스는 255.255.0.0이고, A클래스는 255.0.0.0이다.
        - DNS서버 주소
            - 인터넷을 사용시 url을 해당 컴퓨터의 ip주소로 변환해주는 서버 컴퓨터
            - 설정파일은 /etc/resolv.conf이며 내용 중에 nameserver DNS서버IP의 형식으로 설정됨
            - VMware를 사용하면 VMware가 게이트웨이, DHCP서버, DNS서버의 역할을 모두 가상으로 제공함.
        - 리눅스에서의 네트워크 장치 이름
            - 랜카드가 리눅스에 장착되었을 때 CentOS 7은 자동으로 이 장치의 이름을 ens32(혹은 eno-xxxxx)로 인식함.
            - 네트워크 설정 정보 : ifconfig ens32
            - 네트워크 장치 가동 : ifup ens32
            - 네트워크 장치 정지 : ifdown ens32
        - 네트워크 관련 명령어
            - nmtui : Network Manager Text User Interface의 약자로, 네트워크와 관련된 작업 대부분은 이 명령어를 기반으로 삼아 실행 가능
                - 자동 IP주소 또는 고정 IP 주소 사용 결정
                - IP주소, 서브넷마스크, 게이트웨이 정보 입력
                - DNS 정보 입력
                - 네트워크 카드 드라이버 설정
                - 네트워크 장치의 설정
                - 변경되는 파일
                    - /etc/sysconfig/network
                    - /etc/sysconfig/network-scripts/ifcfg-ens32
                    - /etc/resolv.conf
                    - /etc/hosts
            - systemctl start/stop/restart/status network
                - 네트워크 설정을 변경한 후에 변경된 내용을 시스템에 적용시키는 명령어.
                - nmtui명령어를 실행해 편집한 후에는 꼭 systemctl restart network명령어를 실행
            - ifup/down 장치명
                - 해당 장치를 작동 혹은 장치를 끄는 명령
            - ping IP주소 또는 URL
                - 해당 컴퓨터가 네트워크상에서 응답하는지를 테스트하는 간편한 명령
- SELinux
    - SELinux는 보안에 취약한 리눅스를 보호하기 위해 만들어졌다.
    - 시스템에서 보안에 영향을 미치는 서비스, 권한을 제어 가능
    - SELinux환경에서는 해커가 어떤 경로로 시스템 침입에 성공하든, 침입한 경로의 애플리케이션 사용 이상의 권한을 얻지 못한다.
    - 만약 FTP서버의 경로로 침입시 FTP와 관련된 디렉터리나 파일 외에는 다른 서버에는 접근 불가하여 피해를 최소한으로 줄일 수 있다.
    - 수준
        - 강제(enforcing) : 시스템 보안에 영향을 미치는 기능이 감지시 그 기능이 작동되지 않도록 시스템에서 막음
        - 허용(permission) : 시스템 보안에 영향을 미치는 기능이 감지시 허용은 하되 사용 내용이 로그에 남는다. 화면상에도 출력
        - 비활성(disabled) : 사용하지 않음
- 파이프, 필터, 리다이렉션
    - 파이프 : 2개의 프로그램을 연결해주는 연결 통로
    - 필터 : 필요한 것만 걸러주는 명령, grep, tail, wc, sort, awk, sed명령어 등이 존재
    - 리다이렉션 : 표준 입출력의 방향을 바꾼다.
- 프로세스, 데몬, 서비스
    - 프로세스
        - 하드디스크에 저장된 실행 코드가 메모리에 로딩되어 활성화된 것
        - 포그라운드 프로세스 : 실행시 화면에 나타나서 사용자와 상호작용을 하는 프로세스, 즉 화면에서 실행되는 것이 보이는 프로세스
        - 백그라운드 프로세스 : 실행은 되었으나, 화면에는 나타나지 않고 뒤에서 실행되는 프로세스, 백신, 서버 데몬 등
        - 프로세스 번호 : 메모리에 로딩되어 활성화된 프로세스를 구분하기 위한 고유 번호
        - 작업 번호 : 현재 실행되는 백그라운드 프로세스의 순차 번호
        - 모든 프로세스는 독립실행이 아니고 부모 프로세스의 하위에 종속되어 실행됨.
    - 서비스
        - 데몬이라고도 불리며 서버 프로세스를 의미한다.
        - 서비스는 웹 서버, 네임 서버, DB 서버 등의 프로세스를 지칭
        - 또는 웹 서버 데몬, 네임 서버 데몬으로 부르기도 한다.
        - 백그라운드 프로세스의 일종임.
    - 서비스 및 소켓
        - 서비스는 평시에도 늘 가동하는 서버 프로세스며, 소켓은 필요시만 작동하는 서버 프로세스를 의미
        - 이것들은 systemd라고 부르는 서비스 매니저 프로그램으로 작동시키거나 관리함.
        - 서비스의 특징
            - 시스템과 독자적으로 구동되어 제공하는 프로세스
            - 웹 서버, DB서버, FTP서버 등이 있다.
            - 실행 및 종료는 대개 systemctl start/stop/restart 서비스이름 으로 사용됨
            - 예로 웹서버는 `systemctl start httpd`
            - `systemctl list-unit-files`를 통해서 현재 사용과 사용 안 함을 확인 가능
        - 소켓
            - 서비스는 항상 가동되지만, 소켓은 외부에서 특정 서비스를 요청시에 systemd가 구동시킴
            - 요청이 끝나면 소켓도 종료됨
            - `/usr/lib/systemd/system` 디렉터리에 소켓이름.socket으로 존재
- GRUB 부트로더
    - 시스템 부팅시 처음 나오는 선택 화면
    - 부트 정보를 사용자가 임의로 변경 가능
    - 다른 여러 가지 운영체제와 멀티부팅 가능
    - 대화형 설정이므로 커널의 경로와 파일 이름만 알면 부팅이 가능
    - GRUB2를 사용하는데 이제는, 여기서는 셸 스크립트를 지원해 다양한 함수 및 조건식 사용 가능
    - 또한 동적 모듈을 로드 가능
    - 그래픽 부트 메뉴를 지원하며, 부트 스플래시 성능이 개선되었다.
    - ISO 이미지를 이용해 바로 부팅 가능
    - 